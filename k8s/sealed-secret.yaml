################################################################################
# Sealed Secrets — 암호화된 시크릿 관리
#
# 사전 준비:
#   1. Sealed Secrets 컨트롤러 설치:
#      helm repo add sealed-secrets https://bitnami-labs.github.io/sealed-secrets
#      helm install sealed-secrets sealed-secrets/sealed-secrets -n kube-system
#
#   2. kubeseal CLI 설치 후 아래 명령으로 SealedSecret 생성:
#      kubectl create secret generic playcode-secrets \
#        --namespace=playcode \
#        --from-literal=JWT_SECRET='your-jwt-secret' \
#        --from-literal=JWT_REFRESH_SECRET='your-refresh-secret' \
#        --from-literal=MONGO_INITDB_ROOT_PASSWORD='your-mongo-password' \
#        --from-literal=USER_DB_URI='mongodb://admin:password@mongodb-service:27017/userdb?authSource=admin' \
#        --from-literal=QUIZ_DB_URI='mongodb://admin:password@mongodb-service:27017/quizdb?authSource=admin' \
#        --from-literal=NAVER_CLIENT_SECRET='your-naver-secret' \
#        --from-literal=GOOGLE_CLIENT_SECRET='your-google-secret' \
#        --from-literal=AWS_SECRET_ACCESS_KEY='your-aws-secret' \
#        --from-literal=EMAIL_PASS='your-email-password' \
#        --dry-run=client -o yaml | \
#        kubeseal --format yaml > k8s/sealed-secret.yaml
#
#   3. 생성된 sealed-secret.yaml은 Git에 안전하게 커밋 가능
################################################################################

# 아래는 SealedSecret 리소스의 템플릿 구조입니다.
# 실제 사용 시 위의 kubeseal 명령으로 암호화된 값으로 교체해야 합니다.
apiVersion: bitnami.com/v1alpha1
kind: SealedSecret
metadata:
  name: playcode-secrets
  namespace: playcode
spec:
  encryptedData:
    # kubeseal로 암호화된 값이 여기에 들어갑니다.
    # 예시 (실제 암호화된 값으로 교체 필요):
    JWT_SECRET: "AgBy3i4OJSWK+PiTySYZZA9rO..."            # kubeseal 암호화 값
    JWT_REFRESH_SECRET: "AgBy3i4OJSWK+PiTySYZZA..."        # kubeseal 암호화 값
    MONGO_INITDB_ROOT_PASSWORD: "AgBy3i4OJSWK+Pi..."       # kubeseal 암호화 값
    USER_DB_URI: "AgBy3i4OJSWK+PiTySYZZA9rO..."            # kubeseal 암호화 값
    QUIZ_DB_URI: "AgBy3i4OJSWK+PiTySYZZA9rO..."            # kubeseal 암호화 값
    NAVER_CLIENT_SECRET: "AgBy3i4OJSWK+PiTySYZZA9..."      # kubeseal 암호화 값
    GOOGLE_CLIENT_SECRET: "AgBy3i4OJSWK+PiTySYZZA..."      # kubeseal 암호화 값
    AWS_SECRET_ACCESS_KEY: "AgBy3i4OJSWK+PiTySYZZA..."     # kubeseal 암호화 값
    EMAIL_PASS: "AgBy3i4OJSWK+PiTySYZZA9rO..."             # kubeseal 암호화 값
  template:
    metadata:
      name: playcode-secrets
      namespace: playcode
    type: Opaque
